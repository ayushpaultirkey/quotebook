<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/public/library/tailwind-3.2.7.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>quotebook</title>
    <style>
        html, body {
            padding: 0;
            margin: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

    <div class="w-full h-full flex justify-center">
        <div class="w-full sm:shadow-2xl sm:max-w-md sm:my-4 sm:border sm:border-l-4 border-solid border-l-gray-600 border-gray-400">
            <div class="app h-full relative overflow-hidden"></div>
        </div>
    </div>

</body>
</html>
<!--
<script src="./../script/app.min.js"></script>
-->
<script>
let Method={};Method.List={};class Component{constructor(){this.id=`c-${Math.random().toString(36).slice(6)}`,this.parent={},this.child={},this.binding={"@e":{}},this.root=null,this.wait=!0,this.args={}}async init(){}async render(){return document.createElement("div")}Unique(t="",e={}){this.root.querySelectorAll(`[${t}]`).forEach(i=>{let s="x"+Math.random().toString(36).slice(6);e[i.getAttribute(t)]=i,i.setAttribute(t,s)})}async _cx(t=null,e=""){if(!(t instanceof Object))return document.createTextNode("");{let i=new t;return e instanceof Object&&void 0!==(e=void 0!==e.args?e.args:e).id&&(i.id=e.id),i.parent[this.id]=this,i.args=e,this.child[i.id]=i,await i._init(null,e)}}_nx(t=null,e="",i={}){let s="x"+Math.random().toString(36).slice(6),n=null,o=!1;if("t"===t)-1==e.indexOf("{")?n=document.createTextNode(e):((n=document.createElement("span")).innerText=e,n.classList.add(s),this._bx(e,`.${s}`,2));else{for(let a in n=document.createElement(t),i){let l=i[a];if(l instanceof Object){for(let r in l){let h=(n.hasAttribute(r)?n.getAttribute(r):"")+l[r].toString();-1!==h.indexOf("{")&&(_bax.bind(this)(h,r,s),o=!0),n.setAttribute(r,h)}continue}-1!==(l=(n.hasAttribute(a)?n.getAttribute(a):"")+l.toString()).indexOf("{")&&(_bax.bind(this)(l,a,s),o=!0),n.setAttribute(a,l)}e instanceof Array?e.forEach(t=>{n.appendChild(t)}):(n.innerHTML=e,-1!==e.indexOf("{")&&(this._bx.bind(this)(e,`.${s}`,2),o=!0)),o&&n.classList.add(s)}return n}_bx(t,e,i,s={}){void 0===this.binding[t]&&(this.binding[t]={value:t,e:[]}),void 0===this.binding["@e"][e]&&(this.binding["@e"][e]={}),1==i&&("class"==s.attr&&(s.data+=` ${e.replace(/\./g,"")}`),void 0===this.binding["@e"][e][s.attr]&&(this.binding["@e"][e][s.attr]={},this.binding["@e"][e][s.attr]["@value"]=s.data,this.binding["@e"][e][s.attr]["@key"]=[]),this.binding["@e"][e][s.attr]["@key"].push(t),delete s.data),this.binding[t].e.push({type:i,node:e,...s})}Set(t="",e=""){let i=this.binding[t.replace("++","")];if(void 0!==i){let s=i.e;for(var n=0,o=s.length;n<o;n++){let a=s[n];if(1==a.type){let l=a.node,r=this.binding["@e"][l],h=this.root.classList.contains(l.replace(".",""))?this.root:this.root.querySelector(l);if(void 0===r||void 0===r[a.attr]||null==h)continue;let c=r[a.attr]["@value"],d=r[a.attr]["@key"];if("function"==typeof e){let u=`e-${Math.random().toString(36).slice(6)}`;Method.List[u]={event:e.bind(this),e:l[n].selector},e=`hxh.List["${u}"].event();`}c=c.replace(RegExp(t.replace("++",""),"g"),e),d.forEach(t=>{c=c.replace(RegExp(t,"g"),this.binding[t].value)}),h.setAttribute(a.attr,c)}else if(2==a.type){let b=this.root.classList.contains(a.node.replace(".",""))?this.root:this.root.querySelector(a.node);if(null==b)continue;let x=t.indexOf("++");e instanceof Element?(-1!==x?b.insertAdjacentElement(0==x?"afterbegin":"beforeend",e):(b.childNodes.forEach(t=>t.remove()),b.appendChild(e)),e=e.outerHTML):-1!==x?(b.insertAdjacentHTML(0==x?"afterbegin":"beforeend",e),e=i.value+e):b.innerHTML=e}}i.value=e}}Get(t){let e=this.binding[t];return void 0!==e?e.value:null}Style(t={}){let e="";for(var i in t)e+=`${i}:${t[i]};`;return e}async _init(t=null,e={}){if(this.root="function"==typeof this.warp?await this.warp():await this.render(),this.wait?await this.init(e):this.init(e),null==t)return this.root;document.querySelector(t).appendChild(this.root)}}function _bax(t,e,i){let s=t.match(/{\w\S+?}/gm);if(null!==s){let n=[];s.forEach(s=>{n.includes(s)||(this._bx(s,`.${i}`,1,{data:t,attr:e}),n.push(s))})}}Component.Render=async function(t=null,e={},i=""){await (new t)._init(i,e)},window.hxc=Component,window.hxh=Method;class Menu extends Component{constructor(){super()}init(){this.Set("{q-left}","100%"),this.Set("{q-scale}","0.8")}render(){return this._nx("div",[this._nx("div",[this._nx("label",[this._nx("t","quotebook."),this._nx("label","v1",{class:"text-sm"})],{class:"text-2xl font-bold"}),this._nx("a","github",{href:"https://github.com/ayushpaultirkey/quotebook",class:"text-blue-400 underline"})],{class:"flex flex-col mt-8"})],{class:"absolute w-full h-full p-6 z-[95] bg-gray-100 top-0",style:"left: {q-left}; scale: {q-scale}; transition: 0.3s;"})}Show(){this.Set("{q-left}","0%"),this.Set("{q-scale}","1")}Hide(){this.Set("{q-left}","100%"),this.Set("{q-scale}","0.8")}}class QuoteCreate extends Component{constructor(){super()}init(){this.Set("{q-right}","100%;"),this.Set("{q-scale}","0.8"),this.Set("{q-hide}",this.Hide),this.Set("{q-create}",this.Create),this.Set("{q-button}","Create")}render(){return this._nx("div",[this._nx("div",[this._nx("label","Create",{class:"text-2xl font-bold"}),this._nx("textarea",[],{id:"content",placeholder:"Write your quote here",class:"p-2 h-32 border border-solid border-gray-300 rounded-lg outline-0 shadow-sm bg-white text-sm resize-none"}),this._nx("input",[],{id:"author",type:"text",placeholder:"by (optional)",class:"p-2 border border-solid border-gray-300 rounded-lg outline-0 shadow-sm bg-white text-sm"}),this._nx("div",[this._nx("button",[this._nx("t","{q-button}")],{onclick:"{q-create}",class:"bg-blue-400 hover:bg-blue-500 active:bg-blue-600 transition-colors border border-solid border-blue-500 rounded-lg text-left text-sm py-2 px-6 shadow-sm shadow-blue-400"}),this._nx("button","Cancel",{onclick:"{q-hide}",class:"ml-2 bg-gray-400 hover:bg-gray-500 active:bg-gray-600 transition-colors border border-solid border-gray-500 rounded-lg text-left text-sm py-2 px-6 shadow-sm"})])],{class:"flex flex-col mt-8 space-y-4"})],{class:"absolute w-full h-full p-6 z-[95] bg-gray-100 top-0",style:"right: {q-right}; scale: {q-scale}; transition: 0.3s;"})}Show(){this.Set("{q-right}","0%"),this.Set("{q-scale}","1")}Hide(){this.Set("{q-right}","100%"),this.Set("{q-scale}","0.8")}async Create(){let t=document.getElementById("content").value,e=document.getElementById("author").value;(this.Set("{q-button}","Creating"),(0==e.length||null==e)&&(e="anonymous"),0==t.length||null==t)?alert("Enter content"):(await (await fetch(`/quote/create?content=${t}&author=${e}`)).json()).success?alert("Quote created !"):alert("Unable to create quote"),this.Set("{q-button}","Create")}}class NavigationButton extends Component{constructor(){super()}init(){this.Set("{q-menu}",this.ToggleMenuAndCreate)}render(){return this._nx("div",[this._nx("button",[this._nx("i",[],{class:"fa fa-bars mr-2 text-sm"}),this._nx("t","MENU")],{onclick:"{q-menu}",class:"hover:text-blue-400 active:text-blue-500 transition-colors"})],{class:"absolute right-4 top-4 z-[100]"})}ToggleMenuAndCreate(){let t=this.parent.quotebook.child["quote-create"],e=this.parent.quotebook.child.menu;"0%"==t.Get("{q-right}")&&t.Hide(),"0%"==e.Get("{q-left}")?e.Hide():e.Show()}}class QuoteDisplay extends Component{constructor(){super()}init(){this.Set("{q-create-visible}",this.ShowQuoteCreate),this.Set("{q-author}",""),this.Set("{q-content}",""),this.Set("{q-random}",this.Load),this.Set("{q-copy}",this.Copy),this.Set("{q-visible}","hidden"),this.Set("{q-loading}","visible"),this.Set("{q-message}","loading..."),this.Load()}render(){return this._nx("div",[this._nx("div",[this._nx("div",[this._nx("label",[this._nx("t","{q-content}")],{id:"block"}),this._nx("div",[this._nx("label",[this._nx("t","by @"),this._nx("t","{q-author}")],{id:"author"})],{class:"text-sm font-bold"})],{class:"{q-visible}"}),this._nx("div",[this._nx("label",[this._nx("t","{q-message}")],{class:"text-sm font-bold"})],{class:"{q-loading}"})],{class:"h-full flex justify-center items-center p-10 pb-0"}),this._nx("div",[this._nx("div",[this._nx("button",[],{onclick:"{q-create-visible}",class:"fa fa-plus w-10 h-10 hover:text-blue-500 active:text-blue-600 transition-colors"}),this._nx("button",[],{onclick:"{q-random}",class:"fa fa-dice w-10 h-10 hover:text-blue-500 active:text-blue-600 transition-colors"}),this._nx("button",[],{onclick:"{q-copy}",class:"fa fa-copy w-10 h-10 hover:text-blue-500 active:text-blue-600 transition-colors"})],{class:"text-center space-x-2"})],{class:"p-10 pt-0 select-none"})],{class:"w-full h-full flex flex-col"})}ShowContent(t=""){this.Set("{q-content}","");let e=0,i=setInterval(()=>{e==t.length?(clearInterval(i),console.log("STOPPED")):(this.Set("{q-content}++",t[e]),e++)},15)}ShowQuoteCreate(){this.parent.quotebook.child["quote-create"].Show()}async Load(){this.Set("{q-visible}","hidden"),this.Set("{q-loading}","visible"),this.Set("{q-message}","loading...");let t=await (await fetch("/quote/random")).json();t.success&&t.data.length>0?(this.ShowContent(t.data[0].q_content.substring(1,t.data[0].q_content.length-1)),this.Set("{q-author}",t.data[0].q_author.substring(1,t.data[0].q_author.length-1)),this.Set("{q-visible}","visible"),this.Set("{q-loading}","hidden")):this.Set("{q-message}","Unable to load quotes, try again later")}Copy(){navigator.clipboard.writeText(this.Get("{q-content}"))}}class App extends Component{constructor(){super(),this.id="quotebook"}async init(){}async render(){return this._nx("div",[this._nx("div",[await this._cx(Menu,{id:"menu"}),await this._cx(NavigationButton,{id:"navigation-button"}),await this._cx(QuoteCreate,{id:"quote-create"}),await this._cx(QuoteDisplay,{id:"quote-display"})],{class:"w-full h-full"})],{class:"bg-white w-full h-full flex justify-center items-center"})}}Component.Render(App,{},".app");
</script>